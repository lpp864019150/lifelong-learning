# 线上cpu报警的一次接口优化

## 参考资料

1. [线上cpu报警的一次接口优化 - 掘金](https://juejin.cn/post/7218014583864148023)

## 坑

1. 嵌套子查询

2. in里面有25w个参数

3. 业务未加时间筛选，整表查询

## 解决

1. 把子查询改成left join

2. 减少in查询的数量，在代码里再处理

3. 修改业务逻辑，加上时间筛选